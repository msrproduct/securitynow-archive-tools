# AI Context - Security Now Archive Tools
**Version:** 3.2 üîß Git Remote Configuration Added  
**Last Updated:** 2026-01-15 22:31 CST by Perplexity AI  
**Project Phase:** Pre-Cleanup Audit ‚Üí Production

---

## ‚ö†Ô∏è CRITICAL PATH CORRECTIONS (2026-01-15 22:25)

### PRIMARY REPOSITORY PATH
**‚ùå WRONG (AI kept saying this):**
```
D:\Desktop\SecurityNow-Full-Archive\
```

**‚úÖ CORRECT (Verified with user 2026-01-15):**
```
D:\Desktop\SecurityNow-Full\
```

### SYNC SCRIPT NAME
**‚ùå WRONG (AI kept saying these):**
```
Sync-Repos.ps1
Sync-Repo.ps1
```

**‚úÖ CORRECT (User confirmed 2026-01-15):**
```
Special-Sync.ps1
```

**User Quote:** "I can't find the file ./Sync-Repo.ps1 but I think we renamed it Special_Sync, that's the only file I can find."

---

## üîó GIT REMOTE CONFIGURATION (CRITICAL - Added 2026-01-15 22:31)

### Your Local Folder Remote Mapping
**D:\Desktop\SecurityNow-Full\** connects to:
- **Remote Name:** `origin`
- **Remote URL:** `https://github.com/msrproduct/securitynow-archive-tools` **(PUBLIC)**
- **NOT connected to:** `securitynow-full-archive` (PRIVATE)

### Why This Matters
- `.ai-context.md` must go in **PUBLIC** repo (where your local folder connects)
- Media files (PDFs, MP3s) should NEVER be in public repo
- If you have a private repo, it's at a **different local path** (not yet confirmed)

### Verification Commands
```powershell
# Check which remote your folder uses
cd D:\Desktop\SecurityNow-Full
git remote -v
# Should show:
# origin  https://github.com/msrproduct/securitynow-archive-tools (fetch)
# origin  https://github.com/msrproduct/securitynow-archive-tools (push)

# Check current branch
git branch
# Should show: * main

# Check if file exists in remote
git ls-remote --heads origin
# Should list main branch
```

### What Happened (2026-01-15 22:23)
1. **AI pushed `.ai-context.md` to PRIVATE repo first** (wrong!)
2. **User ran `git pull`** and got "Already up to date"
3. **File didn't appear** because local folder connects to PUBLIC repo
4. **AI corrected** by pushing to correct PUBLIC repo
5. **User pulled again** and file appeared ‚úÖ

**Lesson:** ALWAYS verify `git remote -v` before pushing files!

---

## DRIVE STRUCTURE AUDIT

Based on complete analysis of all Space threads, here's where files actually live:

### C:\ Drive (Root) - Tools ONLY
- `C:\whispercpp\` - Whisper.cpp installation + models
  - `whisper-cli.exe`
  - `models\ggml-base.en.bin`
- `C:\Program Files\wkhtmltopdf\` - PDF converter
- `C:\Program Files\Microsoft Edge\` - Browser for fallback PDF
- `C:\Program Files\Google\Chrome\` - Browser alternative
- **NO project files, NO scripts, NO data on C:\ root**

### D:\ Drive (Root) - Historical Test Files (Cleanup Candidates)
- `D:\SecurityNow-Test\` - Old test sandbox (may be obsolete)
- `D:\SecurityNow-Full-Archive\` - **WRONG PATH** AI created this in error
- Multiple orphaned test folders from earlier debugging threads

### D:\Desktop\ - ACTUAL WORKSPACE
- **`D:\Desktop\SecurityNow-Full\`** - PRIMARY REPO (connected to PUBLIC GitHub)
- `D:\Desktop\SecurityNow-Full-Public\` - (May not exist? TBD)
- Private repo location: **Unknown - need to confirm if exists**

---

## PROJECT OVERVIEW

### Mission
Archive all Security Now! podcast episodes (2005‚Äì2026+) with:
- Official GRC PDFs where available
- AI-generated transcripts for missing episodes
- Proper copyright separation (public tools vs private media)

### Tech Stack
- **Languages:** PowerShell 7.x (required)
- **PDF Generation:** wkhtmltopdf 0.12.6
- **Transcription:** Whisper.cpp (base.en model)
- **Version Control:** Git with dual repos (public + private)

### Critical Constraints
- **Legal:** Never commit copyrighted media to public repo
- **Performance:** ~1,060 episodes √ó 3‚Äì5 min = 50‚Äì85 hours full run
- **Compatibility:** Windows 10/11, PowerShell 7+, UTF-8 encoding

---

## REPOSITORY STRUCTURE

### Your Local Machine (CORRECTED 2026-01-15)
```
D:\Desktop\SecurityNow-Full/              ‚úÖ PUBLIC REPO (verified git remote)
‚îú‚îÄ‚îÄ local/
‚îÇ   ‚îú‚îÄ‚îÄ audio/         # MP3 files from TWiT
‚îÇ   ‚îú‚îÄ‚îÄ pdf/           # Official + AI PDFs (by year)
‚îÇ   ‚îî‚îÄ‚îÄ transcripts/   # Whisper AI transcripts
‚îú‚îÄ‚îÄ scripts/
‚îÇ   ‚îú‚îÄ‚îÄ sn-full-run.ps1       # v3.1.1 PRODUCTION ENGINE
‚îÇ   ‚îî‚îÄ‚îÄ Special-Sync.ps1      # ‚úÖ CORRECT NAME
‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îú‚îÄ‚îÄ SecurityNowNotesIndex.csv
‚îÇ   ‚îî‚îÄ‚îÄ episode-dates.csv
‚îî‚îÄ‚îÄ .ai-context.md         # THIS FILE
```

### GitHub Repositories
- **Public:** `https://github.com/msrproduct/securitynow-archive-tools`
  - Connected to `D:\Desktop\SecurityNow-Full\`
  - Tools, docs, index CSV only
  - NO media files
- **Private:** `https://github.com/msrproduct/securitynow-full-archive`
  - Local path: **Unknown - need to confirm**
  - Full archive with media (PDFs, MP3s)
  - Git LFS for large files

---

## TOOL INSTALLATION PATHS

### Whisper Speech-to-Text
- **Executable:** `C:\whispercpp\whisper-cli.exe`  
  ‚ùå **NOT** `C:\whisper.cpp\` (no dot!)
- **Model:** `C:\whispercpp\models\ggml-base.en.bin`

### wkhtmltopdf
- **Executable:** `C:\Program Files\wkhtmltopdf\bin\wkhtmltopdf.exe`
- **Required flags:** `--enable-local-file-access`, `--no-pdf-header-footer`, `--quiet`

### PowerShell
- **Version:** 7.4+ required (NOT 5.1)
- **Check:** `$PSVersionTable.PSVersion`

---

## ONGOING CLEANUP AUDIT (Started 2026-01-15)

### Audit Status
- ‚úÖ **Phase 1:** Path corrections identified
- ‚úÖ **Phase 1.5:** Git remote configuration documented
- üîÑ **Phase 2:** Deep thread analysis in progress
- ‚è≥ **Phase 3:** Cleanup checklist generation pending
- ‚è≥ **Phase 4:** File removal with user approval pending

### Known Cleanup Targets
1. **Obsolete Scripts:**
   - Old `Sync-Repos.ps1` versions
   - Test scripts: `Diagnose-Sync.ps1`, `delete*.txt`
   - Duplicate versions: `sn-full-run-v*.ps1`

2. **Orphaned Directories:**
   - `D:\SecurityNow-Test\`
   - Any test folders in `D:\` root

3. **Documentation Drift:**
   - Old path references in docs
   - Outdated script names

### Philosophy
**"Clean Plate Before Coding"** - Eliminate confusion before development sprint

---

## FILE SYNC WORKFLOW

### Sync Order (CRITICAL - NEVER REVERSE)
1. **Local First:** Commit to `D:\Desktop\SecurityNow-Full\` (public repo)
2. **Then Sync:** Run `Special-Sync.ps1` if syncing to private location
3. **Validate:** Confirm NO media files pushed to public GitHub

### Sync Script Usage
```powershell
# Location: D:\Desktop\SecurityNow-Full\scripts\Special-Sync.ps1
# ‚ö†Ô∏è NOT Sync-Repos.ps1 or Sync-Repo.ps1

.\scripts\Special-Sync.ps1  # Run after dev session
```

---

## COMMON MISTAKES LOG

### ‚ùå Mistake #-2: Pushing to Wrong Git Remote (NEW - 2026-01-15 22:31)
**Frequency:** Just happened  
**Error:** AI pushed `.ai-context.md` to private repo, user's local folder connects to public repo

**Why It Happens:**
- AI assumes folder name matches repo name
- Doesn't verify `git remote -v` before pushing
- Silent failure: "Already up to date" but file doesn't appear

**Prevention:**
```powershell
# ALWAYS check before pushing
git remote -v
# Verify output matches intended repo
```

**User Quote (2026-01-15 22:29):**
> "Do you need to add this to .ai-context.md? If so why didn't you recognize this on your own?"

**Lesson:** Never assume - always verify git remotes!

---

### ‚ùå Mistake #0: Wrong Repository Path
**Frequency:** Every AI response until v3.1  
**Error:** `D:\Desktop\SecurityNow-Full-Archive\` doesn't exist

**Correct:**
```powershell
$repoPath = "D:\Desktop\SecurityNow-Full\"  # ‚úÖ
```

**Validation:**
```powershell
Test-Path "D:\Desktop\SecurityNow-Full\scripts\sn-full-run.ps1"
# Should return: True
```

---

### ‚ùå Mistake #-1: Wrong Sync Script Name
**Frequency:** Every sync reference  
**Error:** AI says `Sync-Repos.ps1`

**Correct:**
```powershell
.\scripts\Special-Sync.ps1  # ‚úÖ ONLY THIS
```

---

### ‚ùå Mistake #1: Whisper Path with Dot
**Frequency:** 5 times across threads  
**Error:** `The term 'C:\whisper.cpp\whisper-cli.exe' is not recognized`

**Correct:**
```powershell
$whisperExe = "C:\whispercpp\whisper-cli.exe"  # NO DOT
```

---

### ‚ùå Mistake #2: PowerShell `goto`
**Frequency:** 2 times  
**Error:** `The term 'goto' is not recognized`

**PowerShell doesn't support goto!** Use `return` or structured if-else.

---

### ‚ùå Mistake #3: wkhtmltopdf Silent Failure
**Symptom:** PDF not created, no error

**Fix:** Add `--enable-local-file-access` flag (mandatory on Windows)

---

### ‚ùå Mistake #4: Script Version Confusion
**Problem:** Multiple scripts, unclear which is current

**Solution:**
- **SINGLE SOURCE:** `D:\Desktop\SecurityNow-Full\scripts\sn-full-run.ps1`
- Before proposing code: "Which script are you using?"

---

### ‚ùå Mistake #5: GRC Regex HTML Entity
**Frequency:** 4 times, 8+ hours debugging  
**Problem:** GRC uses `&#160;` (non-breaking space), NOT pipes or regular spaces

**‚úÖ Correct Regex:**
```powershell
'Episode&#160;(\d{1,4})&#160;,&#160;(\d{1,2})'
```

**‚ùå Wrong patterns:**
```powershell
'Episode\s*\|\s*(\d+)'           # Uses pipes (never exists)
'Episode\s+(\d+)\s+,(\d+)'      # Fails on &#160;
```

---

## EMERGENCY QUICK-REF

**When AI gives wrong paths:**
```powershell
# Repo
D:\Desktop\SecurityNow-Full\                 # ‚úÖ CORRECT
D:\Desktop\SecurityNow-Full-Archive\         # ‚ùå AI ERROR

# Git Remote
git remote -v                                # ‚úÖ CHECK FIRST
# Should show: securitynow-archive-tools (PUBLIC)

# Sync Script
.\scripts\Special-Sync.ps1                   # ‚úÖ ONLY THIS
# NOT: Sync-Repos.ps1, Sync-Repo.ps1        # ‚ùå WRONG

# Whisper
C:\whispercpp\whisper-cli.exe                # ‚úÖ NO DOT
C:\whispercpp\models\ggml-base.en.bin        # ‚úÖ

# Production Script
.\scripts\sn-full-run.ps1                    # ‚úÖ v3.1.1+
```

**Path confusion checklist:**
1. ‚ö†Ô∏è **STOP** - Check this file first
2. Verify: `Test-Path "D:\Desktop\SecurityNow-Full\"`
3. Verify: `git remote -v`
4. Verify: `Get-ChildItem .\scripts\*Sync*.ps1`
5. Do NOT proceed with wrong paths

---

## GRC & TWIT REFERENCES

### Official Sources
- **GRC Archive:** `https://www.grc.com/securitynow.htm`
- **Past Years:** `https://www.grc.com/sn/past-{YYYY}.htm`
- **PDF Pattern:** `https://www.grc.com/sn/sn-{NNNN}-notes.pdf`
- **TWiT MP3:** `https://cdn.twit.tv/audio/sn/sn{NNNN}/sn{NNNN}.mp3`

### Credits
All Security Now! content:
- **Author:** Steve Gibson
- **Publisher:** Gibson Research Corporation (GRC)
- **Podcast Host:** TWiT.tv
- **Copyright:** Respective owners

---

## VERSION HISTORY

| Version | Date | Changes |
|---------|------|---------|
| 3.2 | 2026-01-15 22:31 | üîß Added git remote configuration section, documented repo mismatch gotcha |
| 3.1 | 2026-01-15 22:25 | ‚ö†Ô∏è CRITICAL: Fixed repo path, sync script name, drive audit |
| 3.0 | 2026-01-15 | Complete context system (‚ö†Ô∏è had path errors) |
| 2.0 | 2026-01-13 | Script tracking, episode dates |
| 1.0 | 2026-01-11 | Initial draft |

---

**END `.ai-context.md` v3.2**  
**üîß Now includes git remote verification to prevent repo confusion**